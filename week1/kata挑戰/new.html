<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WEEK1 React 產品列表</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

</head>

<body>
    <div id="app">
        <ul></ul>
    </div>
    <input type="text" id="inputByAdd">
    <button type="button" id="buttonByAdd">新增</button>

    <script>
        const data = [
            { id: 1, content: '我是xxx' }, { id: 2, content: '我是yyy' }
        ]
        const app = document.querySelector('#app ul');
        const inputByAdd = document.querySelector('#inputByAdd');
        const buttonByAdd = document.querySelector('#buttonByAdd');
        let num = data.length;

        buttonByAdd.addEventListener('click', () => {
            let val = inputByAdd.value;
            addItem(val);
            inputByAdd.value = '';
        })

        function render() {
            let template = ' ';
            data.forEach(item => {
                template = template + `<li>${item.content} <button type="button" class="removeBtn btn btn-primary mb-2" data-id=${item.id}>刪除</button> </li>`;
            })
            app.innerHTML = template;
            const removeBtn = document.querySelectorAll('.removeBtn');
            removeBtn.forEach(item => {
                item.addEventListener('click', e => {
                    // console.log(e.target.dataset.id)
                    const id = Number.parseInt(e.target.dataset.id);
                    removeItem(id);
                })
            })

        }

        function addItem(content) {
            num++;
            data.push({ id: num, content });
            render();

        }
        addItem('測試測試');
        console.log(data);
        function removeItem(id) {
            const index = data.findIndex(item => item.id === id);
            data.splice(index, 1);
            render();
        }
        removeItem(2);
        console.log(data);


    </script>
</body>

</html>